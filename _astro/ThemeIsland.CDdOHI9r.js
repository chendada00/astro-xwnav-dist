import{j as l}from"./jsx-runtime.D_zvdyIk.js";import{r as u}from"./index.BVOCwoKb.js";const o="zywe-theme-preference",h=7*24*60*60*1e3,r={SYSTEM:"system",DARK:"dark",LIGHT:"light"};function T(){return u.useEffect(()=>{const m=()=>window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,c=()=>{try{const e=localStorage.getItem(o);if(!e)return null;const{mode:t,timestamp:i}=JSON.parse(e);return Date.now()-i>h?(localStorage.removeItem(o),null):{mode:t}}catch(e){return console.error("读取主题缓存失败:",e),null}},a=e=>{try{const t=JSON.stringify({mode:e,timestamp:Date.now()});localStorage.setItem(o,t)}catch(t){console.error("保存主题偏好失败:",t)}},d=e=>{e===r.SYSTEM?m()?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"):e===r.DARK?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")};(()=>{const e=c();let t=r.SYSTEM;e&&(t=e.mode),d(t)})(),window.toggleTheme=function(){document.documentElement.classList.contains("dark")?(document.documentElement.classList.remove("dark"),a(r.LIGHT)):(document.documentElement.classList.add("dark"),a(r.DARK))};const n=window.matchMedia("(prefers-color-scheme: dark)"),s=e=>{const t=c();(!t||t.mode===r.SYSTEM)&&(e.matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"))};return n.addEventListener?n.addEventListener("change",s):n.addListener&&n.addListener(s),()=>{n.removeEventListener?n.removeEventListener("change",s):n.removeListener&&n.removeListener(s)}},[]),l.jsx("div",{className:"hidden"})}export{T as default};
